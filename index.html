<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Serendipity Casa Vacanze a Torino, nel cuore di Santa Rita. Un'oasi di comfort e design per un soggiorno indimenticabile." />
    <title>Serendipity Casa Vacanze</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>

    <!-- --- Language Selector --- -->
    <div class="language-selector">
        <button id="lang-it" class="active">IT</button>
        <button id="lang-en">EN</button>
    </div>

    <!-- --- Hero Section --- -->
    <header class="hero-section hero-updated">
        <nav class="main-nav">
            <div class="logo"><img src="IMAGES/logo_serendipity.png" alt="Serendipity Logo"></div>
            <ul class="nav-links">
                <li><a href="index.html">HOME</a></li>
                <li><a href="explore.html">EXPLORE</a></li>
            </ul>
            <div class="hamburger">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
        </nav>
        <div class="hero-content">
            <h1>Serendipity</h1>
            <h2><span data-lang="it">Casa Vacanze</span><span data-lang="en">Holiday Home</span></h2>
            <p><span data-lang="it">Via Mombarcaro 47, 10136 Torino</span><span data-lang="en">Via Mombarcaro 47, 10136 Turin</span></p>
            <a href="#booking" class="cta-button hero-cta-button cta-button-red"><span data-lang="it">VERIFICA DISPONIBILITÀ</span><span data-lang="en">CHECK AVAILABILITY</span></a>
        </div>
        <a href="#intro" class="scroll-down">
    <span data-lang="it">&#8595;</span>
    <span data-lang="en">&#8595;</span>
    <span class="scroll-text">
        <span data-lang="it">Scorri per scoprire</span>
        <span data-lang="en">Scroll to discover</span>
    </span>
</a>
    </header>

    <main class="content-hidden">
        <!-- --- Intro Section --- -->
        <section id="intro" class="content-section">
            <div class="container">
                <h2 class="section-title">
                    <span data-lang="it">Benvenuti a Serendipity</span>
                    <span data-lang="en">Welcome to Serendipity</span>
                </h2>
                <p class="intro-text">
                    <span data-lang="it">
                        Serendipity è nata quasi per caso, con il desiderio profondo di omaggiare e ringraziare le persone che, inaspettatamente, hanno reso speciale un anno della nostra vita. È con lo stesso spirito che accogliamo ogni ospite: con cura, gratitudine e attenzione, perché il soggiorno sia davvero indimenticabile.
                    </span>
                    <span data-lang="en">
                        Serendipity was born almost by chance, with the heartfelt desire to honour and thank the people who unexpectedly made a year of our life truly special. With the same spirit, we welcome every guest—with care, gratitude, and attention—so that their stay becomes equally unforgettable.
                    </span>
                </p>
                <p class="intro-text">
                    <span data-lang="it">
                        Il nostro bilocale, accogliente e ben attrezzato, si trova al 2° piano (senza ascensore) di una piccola palazzina nel cuore del vivace quartiere Santa Rita, a pochi passi da numerosi servizi. L’intero appartamento è a vostra disposizione, con una camera da letto matrimoniale e un comodo divano letto in soggiorno, per offrirvi il massimo comfort.
                    </span>
                    <span data-lang="en">
                        Our cosy and well-equipped one-bedroom apartment is located on the 2nd floor (no elevator) of a small building in the lively Santa Rita district, just a short walk from many local amenities. The entire flat is at your disposal, featuring a double bedroom and a comfortable sofa bed in the living room, to ensure you enjoy maximum comfort during your stay.
                    </span>
                </p>
            </div>
        </section>

        <!-- --- Amenities Section --- -->
        <section id="amenities" class="content-section" style="background-color: var(--light-gray);">
            <div class="container">
                <h2 class="section-title">
                    <span data-lang="it">Comfort e Dotazioni</span>
                    <span data-lang="en">Comfort & Amenities</span>
                </h2>
                <div class="grid">
                    <div class="card">
                        <h3>
                            <span data-lang="it">Generale</span>
                            <span data-lang="en">General</span>
                        </h3>
                        <ul>
                            <li><span data-lang="it">Porta blindata</span><span data-lang="en">Reinforced door</span></li>
                            <li><span data-lang="it">Connessione Wi-Fi gratuita in tutta la struttura</span><span data-lang="en">Free Wi-Fi throughout the apartment</span></li>
                            <li><span data-lang="it">Struttura anallergica, non fumatori</span><span data-lang="en">Hypoallergenic environment, non-smoking</span></li>
                            <li><span data-lang="it">Riscaldamento, pavimenti in gres</span><span data-lang="en">Heating, tiled floors</span></li>
                        </ul>
                    </div>
                    <div class="card">
                        <h3>
                            <span data-lang="it">Cucina</span>
                            <span data-lang="en">Kitchen</span>
                        </h3>
                        <ul>
                            <li><span data-lang="it">Cucina a induzione attrezzata con microonde, frigorifero, lavastoviglie</span><span data-lang="en">Induction kitchen with microwave, fridge, dishwasher</span></li>
                            <li><span data-lang="it">Macchina da caffè con cialde</span><span data-lang="en">Coffee machine with pods</span></li>
                            <li><span data-lang="it">Lavatrice</span><span data-lang="en">Washing machine</span></li>
                        </ul>
                    </div>
                     <div class="card">
                        <h3>
                            <span data-lang="it">Zona Notte & Bagno</span>
                            <span data-lang="en">Sleeping Area & Bathroom</span>
                        </h3>
                        <ul>
                            <li><span data-lang="it">TV a schermo piatto</span><span data-lang="en">Flat-screen TV</span></li>
                            <li><span data-lang="it">Divano letto matrimoniale</span><span data-lang="en">Double sofa bed</span></li>
                            <li><span data-lang="it">Letto matrimoniale con biancheria inclusa</span><span data-lang="en">Double bed with linens included</span></li>
                            <li><span data-lang="it">Bagno con doccia, bidet, asciugamani, asciugacapelli</span><span data-lang="en">Bathroom with shower, bidet, towels, hairdryer</span></li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- --- Gallery Section --- -->
        <section id="gallery" class="content-section">
            <div class="container">
                <h2 class="section-title">
                    <span data-lang="it">Galleria</span>
                    <span data-lang="en">Gallery</span>
                </h2>
                <div class="gallery-grid">
                    <div class="gallery-row">
                        <div class="gallery-item"><img src="https://images.unsplash.com/photo-1618221195710-dd6b41faaea6?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1740&q=80" alt="Interni del soggiorno" onclick="openLightbox(1)"></div>
                        <div class="gallery-item"><img src="https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1740&q=80" alt="Dettaglio dell'arredamento" onclick="openLightbox(2)"></div>
                        <div class="gallery-item"><img src="https://images.unsplash.com/photo-1616594039964-ae9021a400a0?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1287&q=80" alt="Camera da letto" onclick="openLightbox(3)"></div>
                    </div>
                    <div class="gallery-row">
                        <div class="gallery-item"><img src="https://images.pexels.com/photos/1454804/pexels-photo-1454804.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2" alt="Dettaglio bagno" onclick="openLightbox(4)"></div>
                        <div class="gallery-item"><img src="https://images.unsplash.com/photo-1600607687939-ce8a6c25118c?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1740&q=80" alt="Angolo relax" onclick="openLightbox(5)"></div>
                        <div class="gallery-item"><img src="https://images.unsplash.com/photo-1598928506311-c55ded91a20c?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1740&q=80" alt="Vista esterna" onclick="openLightbox(6)"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- --- Lightbox --- -->
        <div id="lightbox" class="lightbox-container">
            <span class="close-btn" onclick="closeLightbox()">&times;</span>
            <div class="lightbox-content">
                <div class="lightbox-slide">
                    <img src="https://images.unsplash.com/photo-1618221195710-dd6b41faaea6?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1740&q=80" alt="Interni del soggiorno">
                </div>
                <div class="lightbox-slide">
                    <img src="https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1740&q=80" alt="Dettaglio dell'arredamento">
                </div>
                <div class="lightbox-slide">
                    <img src="https://images.unsplash.com/photo-1616594039964-ae9021a400a0?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1287&q=80" alt="Camera da letto">
                </div>
                <div class="lightbox-slide">
                    <img src="https://images.pexels.com/photos/1454804/pexels-photo-1454804.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2" alt="Dettaglio bagno">
                </div>
                <div class="lightbox-slide">
                    <img src="https://images.unsplash.com/photo-1600607687939-ce8a6c25118c?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1740&q=80" alt="Angolo relax">
                </div>
                <div class="lightbox-slide">
                    <img src="https://images.unsplash.com/photo-1598928506311-c55ded91a20c?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1740&q=80" alt="Vista esterna">
                </div>

                <a class="prev-btn" onclick="changeSlide(-1)">&#10094;</a>
                <a class="next-btn" onclick="changeSlide(1)">&#10095;</a>
            </div>
            <div class="dots-container">
                <span class="dot" onclick="currentSlide(1)"></span>
                <span class="dot" onclick="currentSlide(2)"></span>
                <span class="dot" onclick="currentSlide(3)"></span>
                <span class="dot" onclick="currentSlide(4)"></span>
                <span class="dot" onclick="currentSlide(5)"></span>
                <span class="dot" onclick="currentSlide(6)"></span>
            </div>
        </div>

        <!-- --- Location Section --- -->
        <section id="location" class="content-section section-updated">
            <div class="container">
                <h2 class="section-title">
                    <span data-lang="it">Posizione Strategica</span>
                    <span data-lang="en">Strategic Location</span>
                </h2>
                <div class="grid grid-centered">
                    <div class="card">
                        <h3>
                            <span data-lang="it">Punti di Interesse</span>
                            <span data-lang="en">Points of Interest</span>
                        </h3>
                        <ul>
                            <li><span data-lang="it">A pochi passi da fermate bus per il centro, Porta Susa, Porta Nuova, e ospedali</span><span data-lang="en">Steps from public transport to city center, Porta Susa, Porta Nuova, hospitals</span></li>
                            <li><span data-lang="it">500 m dal Santuario di Santa Rita</span><span data-lang="en">500 m from the Sanctuary of Santa Rita</span></li>
                            <li><span data-lang="it">1,1 km dallo Stadio Olimpico Grande Torino</span><span data-lang="en">1.1 km from Stadio Olimpico Grande Torino</span></li>
                            <li><span data-lang="it">1,3 km dall’Inalpi Arena</span><span data-lang="en">1.3 km from Inalpi Arena</span></li>
                            <li><span data-lang="it">1,4 km dal Parco Cavalieri di Vittorio Veneto (Piazza d’Armi)</span><span data-lang="en">1.4 km from Parco Cavalieri di Vittorio Veneto (Piazza d’Armi)</span></li>
                        </ul>
                        <a href="explore.html" class="cta-button read-more-btn">
                            <span data-lang="it">Leggi di più</span>
                            <span data-lang="en">Read More</span>
                        </a>
                    </div>
                </div>
                <div class="map-container-full-width">
                    <div class="map-container">
                        <iframe src="https://www.google.com/maps/d/embed?mid=1jvb2a5NvnJ6g5aDpuVON8M70sRc0Euw" width="640" height="480" allowfullscreen="" loading="lazy"></iframe>
                        <a href="https://www.google.com/maps/dir/?api=1&destination=Via+Mombarcaro+47+Torino" target="_blank" rel="noopener noreferrer" class="map-cta-mobile">
                            <span data-lang="it">Apri in Maps</span>
                            <span data-lang="en">Open in Maps</span>
                        </a>
                    </div>
                </div>
            </div>
        </section>

        <!-- --- Prices Section --- -->
        <section id="prices" class="content-section">
            <div class="container">
                <h2 class="section-title">
                    <span data-lang="it">Prezzi</span>
                    <span data-lang="en">Prices</span>
                </h2>
                <div class="grid grid-centered">
                    <div class="card">
                        <h3>
                            <span data-lang="it">Intero Appartamento – € 115 a notte</span>
                            <span data-lang="en">Entire Apartment – €115 per night</span>
                        </h3>
                        <p>
                            <span data-lang="it">L'appartamento può ospitare comodamente <strong>fino a 3 persone</strong>: dispone di una camera da letto matrimoniale e di un divano letto nel soggiorno.</span>
                            <span data-lang="en">The apartment comfortably accommodates <strong>up to 3 guests</strong>, with a double bedroom and a sofa bed in the living room.</span>
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- --- Check-in/Check-out Section --- -->
        <section id="checkin-checkout" class="content-section" style="background-color: var(--light-gray);">
            <div class="container">
                <h2 class="section-title">
                    <span data-lang="it">Check-in e Check-out</span>
                    <span data-lang="en">Check-in and Check-out</span>
                </h2>
                <div class="grid">
                    <div class="card">
                        <h3><span data-lang="it">Check-in</span><span data-lang="en">Check-in</span></h3>
                        <p><span data-lang="it">Entro le ore 16</span><span data-lang="en">By 4:00 PM</span></p>
                    </div>
                    <div class="card">
                        <h3><span data-lang="it">Check-out</span><span data-lang="en">Check-out</span></h3>
                        <p><span data-lang="it">Entro le ore 12</span><span data-lang="en">By 12:00 PM</span></p>
                    </div>
                    <div class="card">
                        <h3><span data-lang="it">Orari Flessibili</span><span data-lang="en">Flexible Times</span></h3>
                        <p><span data-lang="it">(Possibilità di orari flessibili su richiesta)</span><span data-lang="en">(Flexible times available on request)</span></p>
                    </div>
                </div>
            </div>
        </section>

        <!-- --- Parking Section --- -->
        <section id="parking" class="content-section">
            <div class="container">
                <h2 class="section-title">
                    <span data-lang="it">Parcheggio</span>
                    <span data-lang="en">Parking</span>
                </h2>
                <p class="intro-text">
                    <span data-lang="it">Non disponibile, ma facilmente accessibile nelle vicinanze.</span>
                    <span data-lang="en">Not available, but easy to find nearby.</span>
                </p>
            </div>
        </section>

        <!-- --- Services Section --- -->
        <section id="services" class="content-section" style="background-color: var(--light-gray);">
            <div class="container">
                <h2 class="section-title">
                    <span data-lang="it">Servizi</span>
                    <span data-lang="en">Services</span>
                </h2>
                <div class="grid grid-centered">
                    <div class="card">
                        <h3>
                            <span data-lang="it">Servizi Inclusi</span>
                            <span data-lang="en">Included Services</span>
                        </h3>
                        <ul>
                            <li><span data-lang="it">Wi-Fi</span><span data-lang="en">Wi-Fi</span></li>
                            <li><span data-lang="it">Biancheria da letto e bagno</span><span data-lang="en">Bed linen and towels</span></li>
                        </ul>
                    </div>
                    <div class="card">
                        <h3>
                            <span data-lang="it">Servizi Extra a Pagamento</span>
                            <span data-lang="en">Extra Services (on request)</span>
                        </h3>
                        <ul>
                            <li><span data-lang="it">Vino o champagne su richiesta</span><span data-lang="en">Wine or champagne</span></li>
                            <li><span data-lang="it">Servizio spesa</span><span data-lang="en">Grocery delivery</span></li>
                            <li><span data-lang="it">Lavaggio a secco</span><span data-lang="en">Dry cleaning</span></li>
                            <li><span data-lang="it">Tour della città con guida (anche in francese)</span><span data-lang="en">City tour with certified guide (French available)</span></li>
                            <li><span data-lang="it">Cambio lenzuola giornaliero (€ 5)</span><span data-lang="en">Daily linen change (€ 5)</span></li>
                            <li><span data-lang="it">Riassetto struttura (12:00 – 14:00 o su richiesta)</span><span data-lang="en">Apartment tidying service (12:00–14:00 or on request)</span></li>
                            <li><span data-lang="it">Fattura disponibile</span><span data-lang="en">Invoice available</span></li>
                            <li><span data-lang="it">Pagamento con Paypal, carta di credito, bancomat o contanti</span><span data-lang="en">Payment via Paypal, credit/debit card or cash</span></li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- --- Booking Section --- -->
        <section id="booking" class="content-section booking-section section-updated">
            <div class="container" style="text-align: center;">
                <h2 class="section-title">
                    <span data-lang="it">Prenota il Tuo Soggiorno</span>
                    <span data-lang="en">Book Your Stay</span>
                </h2>
                <p style="max-width: 600px; margin: 0 auto 2rem auto;">
                    <span data-lang="it">Vivi un'esperienza unica a Torino. Controlla la disponibilità e prenota ora la tua vacanza da sogno.</span>
                    <span data-lang="en">Live a unique experience in Turin. Check availability and book your dream vacation now.</span>
                </p>
                <p style="text-align: center;">
                    <strong>
                        <span data-lang="it">Seleziona le date libere di tuo interesse e clicca "PRENOTA DIRETTAMENTE"<br>riceverai a breve la nostra conferma e il link di pagamento.</span>
                        <span data-lang="en">Select the available dates you are interested in and click "BOOK DIRECTLY"<br>you will soon receive our confirmation and the payment link.</span>
                    </strong>
                </p>
                <div class="calendar-nav">
                  <button onclick="cambiaMese(-1)">⬅️ MESE PRECEDENTE</button>
                  <button onclick="cambiaMese(1)">MESE SUCCESSIVO ➡️</button>
                </div>
                <div id="calendari-container" class="calendar-updated"></div>
                <div class="cta-buttons-grid">
                    <div class="cta-row">
                        <button onclick="generaEmail()" class="cta-button cta-button-red">
                            <span data-lang="it">Prenota Direttamente</span>
                            <span data-lang="en">Book Directly</span>
                        </button>
                    </div>
                    <div class="cta-row">
                        <a href="#" class="cta-button">
                            <span data-lang="it">Prenota su Airbnb</span>
                            <span data-lang="en">Book on Airbnb</span>
                        </a>
                        <a href="#" class="cta-button">
                            <span data-lang="it">Prenota su Booking</span>
                            <span data-lang="en">Book on Booking</span>
                        </a>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- --- Login Modal --- -->
    <div id="login-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <form id="login-form">
                <img src="IMAGES/logo_serendipity.png" alt="Serendipity Logo" class="login-logo">
                <div class="input-group">
                    <label for="username">Username</label>
                    <input type="text" id="username" name="username" required>
                </div>
                <div class="input-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" name="password" required>
                </div>
                <button type="submit">Accedi</button>
            </form>
            <div class="opening-info">
                <p class="opening-text-it"><b>Serendipity - Casa Vacanze</b> Stiamo per inaugurare la nostra struttura, saremo pronti ad accogliervi nel cuore del quartiere Santa Rita <b>a Torino dal 26 agosto 2025</b>.</p>
                <p class="opening-text-en"><i><b>Serendipity Holiday Home</b> We're getting ready to open! <b>Starting August 26th, 2025</b>, we'll be delighted to welcome you in the heart of the Santa Rita district in <b>Turin</b>.</i></p>
                <a href="mailto:serendipityholidayhome.torino@gmail.com" class="email-button">e-mail</a>
            </div>
        </div>
    </div>

    <!-- --- Footer --- -->
<footer>
    <div class="container footer-content">
        <div class="footer-copyright">
            <p>
                <span data-lang="it">Serendipity Casa Vacanze &copy; 2025. Tutti i diritti riservati.</span>
                <span data-lang="en">Serendipity Holiday Home &copy; 2025. All rights reserved.</span>
            </p>
            <p class="footer-info">CF 12345678911 | CIR 564398</p>
        </div>
        <div class="footer-social">
            <a href="https://www.instagram.com/serendipitycasavacanze" target="_blank" rel="noopener noreferrer" aria-label="Instagram" class="instagram-link">
                <i class="fab fa-instagram"></i>
            </a>
        </div>
        <div class="footer-policy">
            <a href="privacy-policy.html"><span data-lang="it">Privacy Policy</span><span data-lang="en">Privacy Policy</span></a>
            <a href="cookies-policy.html"><span data-lang="it">Cookies Policy</span><span data-lang="en">Cookies Policy</span></a>
        </div>
    </div>
</footer>

    <script>
        const urlCSV = "https://docs.google.com/spreadsheets/d/1y1zN6TsGKDHXr7fdOCkbH3IXMouSuefamQvHtpxASOw/gviz/tq?tqx=out:csv";
        let disponibilita = {};
        let meseCorrente = new Date().getMonth();
        let annoCorrente = new Date().getFullYear();
        let dateSelezionate = [];
        const emailProprietario = 'serendipityholidayhome.torino@gmail.com';

        function caricaDati(callback) {
            fetch(urlCSV)
            .then(r => r.text())
            .then(text => {
                const righe = text.trim().split("\n").slice(1); // salta intestazione
                righe.forEach(riga => {
                    const [data, stato] = riga.split(",");
                    if (data && stato) { // Aggiunto controllo per righe vuote
                        const [gg, mm, aaaa] = data.trim().split("/"); // formato DD/MM/YYYY
                        const dataISO = `${aaaa}-${mm.padStart(2, "0")}-${gg.padStart(2, "0")}`;
                        disponibilita[dataISO] = stato.trim().toLowerCase();
                    }
                });
                callback();
            })
            .catch(error => {
                console.error("Impossibile caricare i dati di disponibilità. Il calendario verrà mostrato comunque.", error);
                callback(); // Mostra il calendario anche in caso di errore
            });
        }

        function generaCalendario(mese, anno) {
    const lang = document.documentElement.lang || 'it';
    const locale = lang === 'it' ? 'it-IT' : 'en-US';

    const meseNome = new Date(anno, mese).toLocaleString(locale, { month: 'long' });
    const titolo = `${meseNome.charAt(0).toUpperCase() + meseNome.slice(1)} ${anno}`;

    const wrapper = document.createElement("div");
    wrapper.className = "mese";

    const h3 = document.createElement("h3");
    h3.textContent = titolo;
    wrapper.appendChild(h3);

    const griglia = document.createElement("div");
    griglia.className = "calendar-grid";

    const giorniSettimanaIT = ['Dom', 'Lun', 'Mar', 'Mer', 'Gio', 'Ven', 'Sab'];
    const giorniSettimanaEN = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
    const giorniSettimana = lang === 'it' ? giorniSettimanaIT : giorniSettimanaEN;

    for (let g of giorniSettimana) {
        const el = document.createElement("div");
        el.className = "day-name";
        el.textContent = g;
        griglia.appendChild(el);
    }

    let offset = new Date(anno, mese, 1).getDay();
    for (let i = 0; i < offset; i++) {
        const vuoto = document.createElement("div");
        vuoto.className = "day vuoto";
        griglia.appendChild(vuoto);
    }

    const oggi = new Date().toISOString().split('T')[0]; // Data attuale in ISO

    for (let giorno = 1; giorno <= new Date(anno, mese + 1, 0).getDate(); giorno++) {
        const data = `${anno}-${String(mese + 1).padStart(2, '0')}-${String(giorno).padStart(2, '0')}`;
        const stato = disponibilita[data] || "libero";
        const cella = document.createElement("div");
        cella.className = "day";
        cella.dataset.data = data; // Salva la data ISO per facile accesso
        if (stato === "libero") cella.classList.add("libero");
        if (stato === "occupato") cella.classList.add("occupato");
        cella.innerHTML = `<small>${giorno}</small>`;

        // Aggiungi onclick solo se libero e non passata
        if (stato === "libero" && data >= oggi) {
            cella.onclick = function() {
                this.classList.toggle('selected');
                if (this.classList.contains('selected')) {
                    dateSelezionate.push(data);
                } else {
                    dateSelezionate = dateSelezionate.filter(d => d !== data);
                }
            };
        }

        // Riapplica selected se è nell'array
        if (dateSelezionate.includes(data)) {
            cella.classList.add('selected');
        }

        griglia.appendChild(cella);
    }

    wrapper.appendChild(griglia);
    return wrapper;
}

        function mostraCalendari() {
            const contenitore = document.getElementById("calendari-container");
            contenitore.innerHTML = "";
            contenitore.appendChild(generaCalendario(meseCorrente, annoCorrente));
            let mese2 = meseCorrente + 1;
            let anno2 = annoCorrente;
            if (mese2 > 11) {
                mese2 = 0;
                anno2++;
            }
            contenitore.appendChild(generaCalendario(mese2, anno2));
        }

        function cambiaMese(delta) {
            meseCorrente += delta;
            if (meseCorrente > 11) {
                meseCorrente = 0;
                annoCorrente++;
            } else if (meseCorrente < 0) {
                meseCorrente = 11;
                annoCorrente--;
            }
            mostraCalendari();
        }

        function generaEmail() {
    if (dateSelezionate.length === 0) {
        alert('Seleziona almeno una data libera.');
        return;
    }

    // Ordina le date
    dateSelezionate.sort();

    const lang = document.documentElement.lang;
    const subject = lang === 'it' ? 'Interesse per prenotazione Serendipity' : 'Interest in booking Serendipity';
    const body = lang === 'it' 
        ? `Buongiorno,
vorrei prenotare la vostra struttura per le seguenti date (anno-mese-giorno): ${dateSelezionate.join(', ')}.
Attendo una vostra comunicazione di conferma ed il link per il pagamento tramite carta di credito.` 
        : `Hello, I am interested in booking for the following dates: ${dateSelezionate.join(', ')}. Contact me for confirmation and payment.`;

    const mailto = `mailto:${emailProprietario}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
    window.location.href = mailto;
}

        document.addEventListener('DOMContentLoaded', () => {
            // Intersection Observer for animations
            const sections = document.querySelectorAll('.content-section');
            const observer = new IntersectionObserver(entries => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                        observer.unobserve(entry.target);
                    }
                });
            }, {
                threshold: 0.1
            });
            sections.forEach(section => {
                observer.observe(section);
            });

            // Hamburger menu
            const hamburger = document.querySelector('.hamburger');
            const navLinks = document.querySelector('.nav-links');

            hamburger.addEventListener('click', () => {
                navLinks.classList.toggle('active');
            });

            // Language switcher
            const langItBtn = document.getElementById('lang-it');
            const langEnBtn = document.getElementById('lang-en');

            function setLanguage(lang) {
                document.documentElement.lang = lang;
                langItBtn.classList.toggle('active', lang === 'it');
                langEnBtn.classList.toggle('active', lang === 'en');
                mostraCalendari(); // Redraw calendar with new language
            }

            langItBtn.addEventListener('click', () => setLanguage('it'));
            langEnBtn.addEventListener('click', () => setLanguage('en'));

            // Set initial language based on the HTML lang attribute
            setLanguage(document.documentElement.lang);

            // Lightbox
            let slideIndex = 1;

            window.openLightbox = function(n) {
                document.getElementById("lightbox").style.display = "block";
                showSlides(slideIndex = n);
            }

            window.closeLightbox = function() {
                document.getElementById("lightbox").style.display = "none";
            }

            window.changeSlide = function(n) {
                showSlides(slideIndex += n);
            }

            window.currentSlide = function(n) {
                showSlides(slideIndex = n);
            }

            function showSlides(n) {
                let i;
                const slides = document.getElementsByClassName("lightbox-slide");
                const dots = document.getElementsByClassName("dot");
                if (n > slides.length) {slideIndex = 1}
                if (n < 1) {slideIndex = slides.length}
                for (i = 0; i < slides.length; i++) {
                    slides[i].style.display = "none";
                }
                for (i = 0; i < dots.length; i++) {
                    dots[i].className = dots[i].className.replace(" active", "");
                }
                slides[slideIndex-1].style.display = "block";
                dots[slideIndex-1].className += " active";
            }

            // Login Modal
            const loginModal = document.getElementById('login-modal');
            const closeBtn = document.querySelector('.modal .close-btn');

            loginModal.style.display = 'block';
            document.body.classList.add('modal-open');

            closeBtn.addEventListener('click', () => {
                loginModal.style.display = 'none';
                document.body.classList.remove('modal-open');
            });

            window.addEventListener('click', (event) => {
                if (event.target == loginModal) {
                    loginModal.style.display = 'none';
                    document.body.classList.remove('modal-open');
                }
            });

            document.getElementById('login-form').addEventListener('submit', function(event) {
                event.preventDefault();
                const username = document.getElementById('username').value;
                const password = document.getElementById('password').value;

                if (username === 'daniela' && password === 'dan9812') {
                    alert('Login effettuato con successo!');
                    loginModal.style.display = 'none';
                    document.body.classList.remove('modal-open');
                    document.querySelector('main').classList.remove('content-hidden');
                } else {
                    alert('Credenziali non valide');
                }
            });

            caricaDati(mostraCalendari);
        });
    </script>

</body>
</html>